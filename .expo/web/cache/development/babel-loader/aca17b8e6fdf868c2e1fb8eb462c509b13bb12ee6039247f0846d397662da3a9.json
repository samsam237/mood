{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Documents\\\\projets\\\\nino\\\\actipod\\\\mood\\\\src\\\\contexts\\\\AuthContext.web.js\",\n  _this = this;\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { firebaseAuthService } from '../services/firebaseAuthService';\nimport { webStorage } from '../services/webStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar AuthContext = createContext();\nexport var useAuth = function useAuth() {\n  var context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  useEffect(function () {\n    initializeAuth();\n  }, []);\n  var initializeAuth = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var unsubscribe = firebaseAuthService.onAuthStateChanged(function () {\n          var _ref3 = _asyncToGenerator(function* (firebaseUser) {\n            if (firebaseUser) {\n              var _firebaseUser$provide;\n              var userData = {\n                uid: firebaseUser.uid,\n                email: firebaseUser.email,\n                name: firebaseUser.displayName || firebaseUser.email,\n                photo: firebaseUser.photoURL,\n                provider: ((_firebaseUser$provide = firebaseUser.providerData[0]) == null ? void 0 : _firebaseUser$provide.providerId) || 'unknown'\n              };\n              yield webStorage.setItem('user', JSON.stringify(userData));\n              setUser(userData);\n            } else {\n              yield webStorage.deleteItem('user');\n              setUser(null);\n            }\n            setLoading(false);\n          });\n          return function (_x) {\n            return _ref3.apply(this, arguments);\n          };\n        }());\n        return function () {\n          return unsubscribe();\n        };\n      } catch (error) {\n        console.error('Auth initialization error:', error);\n        setLoading(false);\n      }\n    });\n    return function initializeAuth() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var signInWithGoogle = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        var result = yield firebaseAuthService.signInWithGoogle();\n        return result;\n      } catch (error) {\n        console.error('Google Sign-In Error:', error);\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n    });\n    return function signInWithGoogle() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var signInWithFacebook = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      try {\n        var result = yield firebaseAuthService.signInWithFacebook();\n        return result;\n      } catch (error) {\n        console.error('Facebook Sign-In Error:', error);\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n    });\n    return function signInWithFacebook() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var signInWithEmail = function () {\n    var _ref6 = _asyncToGenerator(function* (email, password) {\n      try {\n        var result = yield firebaseAuthService.signInWithEmail(email, password);\n        return result;\n      } catch (error) {\n        console.error('Email Sign-In Error:', error);\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n    });\n    return function signInWithEmail(_x2, _x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var signUpWithEmail = function () {\n    var _ref7 = _asyncToGenerator(function* (email, password) {\n      var displayName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      try {\n        var result = yield firebaseAuthService.signUpWithEmail(email, password, displayName);\n        return result;\n      } catch (error) {\n        console.error('Email Sign-Up Error:', error);\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n    });\n    return function signUpWithEmail(_x4, _x5) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var signOut = function () {\n    var _ref8 = _asyncToGenerator(function* () {\n      try {\n        var result = yield firebaseAuthService.signOut();\n        return result;\n      } catch (error) {\n        console.error('Sign Out Error:', error);\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n    });\n    return function signOut() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  var value = {\n    user: user,\n    loading: loading,\n    signInWithGoogle: signInWithGoogle,\n    signInWithFacebook: signInWithFacebook,\n    signInWithEmail: signInWithEmail,\n    signUpWithEmail: signUpWithEmail,\n    signOut: signOut\n  };\n  return _jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 10\n  }, _this);\n};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","firebaseAuthService","webStorage","jsxDEV","_jsxDEV","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","loading","setLoading","initializeAuth","_ref2","_asyncToGenerator","unsubscribe","onAuthStateChanged","_ref3","firebaseUser","_firebaseUser$provide","userData","uid","email","name","displayName","photo","photoURL","provider","providerData","providerId","setItem","JSON","stringify","deleteItem","_x","apply","arguments","error","console","signInWithGoogle","_ref4","result","success","message","signInWithFacebook","_ref5","signInWithEmail","_ref6","password","_x2","_x3","signUpWithEmail","_ref7","length","undefined","_x4","_x5","signOut","_ref8","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_this"],"sources":["C:/Users/DELL/Documents/projets/nino/actipod/mood/src/contexts/AuthContext.web.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { firebaseAuthService } from '../services/firebaseAuthService';\r\nimport { webStorage } from '../services/webStorage';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    initializeAuth();\r\n  }, []);\r\n\r\n  const initializeAuth = async () => {\r\n    try {\r\n      // Écouter les changements d'état d'authentification Firebase\r\n      const unsubscribe = firebaseAuthService.onAuthStateChanged(async (firebaseUser) => {\r\n        if (firebaseUser) {\r\n          // Utilisateur connecté\r\n          const userData = {\r\n            uid: firebaseUser.uid,\r\n            email: firebaseUser.email,\r\n            name: firebaseUser.displayName || firebaseUser.email,\r\n            photo: firebaseUser.photoURL,\r\n            provider: firebaseUser.providerData[0]?.providerId || 'unknown'\r\n          };\r\n          \r\n          // Sauvegarder dans le stockage local\r\n          await webStorage.setItem('user', JSON.stringify(userData));\r\n          setUser(userData);\r\n        } else {\r\n          // Utilisateur déconnecté\r\n          await webStorage.deleteItem('user');\r\n          setUser(null);\r\n        }\r\n        setLoading(false);\r\n      });\r\n\r\n      // Nettoyer l'écouteur lors du démontage\r\n      return () => unsubscribe();\r\n    } catch (error) {\r\n      console.error('Auth initialization error:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const signInWithGoogle = async () => {\r\n    try {\r\n      const result = await firebaseAuthService.signInWithGoogle();\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Google Sign-In Error:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const signInWithFacebook = async () => {\r\n    try {\r\n      const result = await firebaseAuthService.signInWithFacebook();\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Facebook Sign-In Error:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const signInWithEmail = async (email, password) => {\r\n    try {\r\n      const result = await firebaseAuthService.signInWithEmail(email, password);\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Email Sign-In Error:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const signUpWithEmail = async (email, password, displayName = null) => {\r\n    try {\r\n      const result = await firebaseAuthService.signUpWithEmail(email, password, displayName);\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Email Sign-Up Error:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      const result = await firebaseAuthService.signOut();\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Sign Out Error:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    loading,\r\n    signInWithGoogle,\r\n    signInWithFacebook,\r\n    signInWithEmail,\r\n    signUpWithEmail,\r\n    signOut,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,mBAAmB,QAAQ,iCAAiC;AACrE,SAASC,UAAU,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,IAAMC,WAAW,GAAGR,aAAa,CAAC,CAAC;AAEnC,OAAO,IAAMS,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;EAC3B,IAAMC,OAAO,GAAGT,UAAU,CAACO,WAAW,CAAC;EACvC,IAAI,CAACE,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,6CAA6C,CAAC;EAChE;EACA,OAAOD,OAAO;AAChB,CAAC;AAED,OAAO,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EACrC,IAAAC,SAAA,GAAwBb,QAAQ,CAAC,IAAI,CAAC;IAAAc,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA;EACpB,IAAAI,UAAA,GAA8BlB,QAAQ,CAAC,IAAI,CAAC;IAAAmB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1BlB,SAAS,CAAC,YAAM;IACdqB,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMA,cAAc;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAY;MACjC,IAAI;QAEF,IAAMC,WAAW,GAAGvB,mBAAmB,CAACwB,kBAAkB;UAAA,IAAAC,KAAA,GAAAH,iBAAA,CAAC,WAAOI,YAAY,EAAK;YACjF,IAAIA,YAAY,EAAE;cAAA,IAAAC,qBAAA;cAEhB,IAAMC,QAAQ,GAAG;gBACfC,GAAG,EAAEH,YAAY,CAACG,GAAG;gBACrBC,KAAK,EAAEJ,YAAY,CAACI,KAAK;gBACzBC,IAAI,EAAEL,YAAY,CAACM,WAAW,IAAIN,YAAY,CAACI,KAAK;gBACpDG,KAAK,EAAEP,YAAY,CAACQ,QAAQ;gBAC5BC,QAAQ,EAAE,EAAAR,qBAAA,GAAAD,YAAY,CAACU,YAAY,CAAC,CAAC,CAAC,qBAA5BT,qBAAA,CAA8BU,UAAU,KAAI;cACxD,CAAC;cAGD,MAAMpC,UAAU,CAACqC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACZ,QAAQ,CAAC,CAAC;cAC1Db,OAAO,CAACa,QAAQ,CAAC;YACnB,CAAC,MAAM;cAEL,MAAM3B,UAAU,CAACwC,UAAU,CAAC,MAAM,CAAC;cACnC1B,OAAO,CAAC,IAAI,CAAC;YACf;YACAI,UAAU,CAAC,KAAK,CAAC;UACnB,CAAC;UAAA,iBAAAuB,EAAA;YAAA,OAAAjB,KAAA,CAAAkB,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC;QAGF,OAAO;UAAA,OAAMrB,WAAW,CAAC,CAAC;QAAA;MAC5B,CAAC,CAAC,OAAOsB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;QAClD1B,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAAA,gBA/BKC,cAAcA,CAAA;MAAA,OAAAC,KAAA,CAAAsB,KAAA,OAAAC,SAAA;IAAA;EAAA,GA+BnB;EAED,IAAMG,gBAAgB;IAAA,IAAAC,KAAA,GAAA1B,iBAAA,CAAG,aAAY;MACnC,IAAI;QACF,IAAM2B,MAAM,SAASjD,mBAAmB,CAAC+C,gBAAgB,CAAC,CAAC;QAC3D,OAAOE,MAAM;MACf,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7C,OAAO;UAAEK,OAAO,EAAE,KAAK;UAAEL,KAAK,EAAEA,KAAK,CAACM;QAAQ,CAAC;MACjD;IACF,CAAC;IAAA,gBARKJ,gBAAgBA,CAAA;MAAA,OAAAC,KAAA,CAAAL,KAAA,OAAAC,SAAA;IAAA;EAAA,GAQrB;EAED,IAAMQ,kBAAkB;IAAA,IAAAC,KAAA,GAAA/B,iBAAA,CAAG,aAAY;MACrC,IAAI;QACF,IAAM2B,MAAM,SAASjD,mBAAmB,CAACoD,kBAAkB,CAAC,CAAC;QAC7D,OAAOH,MAAM;MACf,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,OAAO;UAAEK,OAAO,EAAE,KAAK;UAAEL,KAAK,EAAEA,KAAK,CAACM;QAAQ,CAAC;MACjD;IACF,CAAC;IAAA,gBARKC,kBAAkBA,CAAA;MAAA,OAAAC,KAAA,CAAAV,KAAA,OAAAC,SAAA;IAAA;EAAA,GAQvB;EAED,IAAMU,eAAe;IAAA,IAAAC,KAAA,GAAAjC,iBAAA,CAAG,WAAOQ,KAAK,EAAE0B,QAAQ,EAAK;MACjD,IAAI;QACF,IAAMP,MAAM,SAASjD,mBAAmB,CAACsD,eAAe,CAACxB,KAAK,EAAE0B,QAAQ,CAAC;QACzE,OAAOP,MAAM;MACf,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5C,OAAO;UAAEK,OAAO,EAAE,KAAK;UAAEL,KAAK,EAAEA,KAAK,CAACM;QAAQ,CAAC;MACjD;IACF,CAAC;IAAA,gBARKG,eAAeA,CAAAG,GAAA,EAAAC,GAAA;MAAA,OAAAH,KAAA,CAAAZ,KAAA,OAAAC,SAAA;IAAA;EAAA,GAQpB;EAED,IAAMe,eAAe;IAAA,IAAAC,KAAA,GAAAtC,iBAAA,CAAG,WAAOQ,KAAK,EAAE0B,QAAQ,EAAyB;MAAA,IAAvBxB,WAAW,GAAAY,SAAA,CAAAiB,MAAA,QAAAjB,SAAA,QAAAkB,SAAA,GAAAlB,SAAA,MAAG,IAAI;MAChE,IAAI;QACF,IAAMK,MAAM,SAASjD,mBAAmB,CAAC2D,eAAe,CAAC7B,KAAK,EAAE0B,QAAQ,EAAExB,WAAW,CAAC;QACtF,OAAOiB,MAAM;MACf,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5C,OAAO;UAAEK,OAAO,EAAE,KAAK;UAAEL,KAAK,EAAEA,KAAK,CAACM;QAAQ,CAAC;MACjD;IACF,CAAC;IAAA,gBARKQ,eAAeA,CAAAI,GAAA,EAAAC,GAAA;MAAA,OAAAJ,KAAA,CAAAjB,KAAA,OAAAC,SAAA;IAAA;EAAA,GAQpB;EAED,IAAMqB,OAAO;IAAA,IAAAC,KAAA,GAAA5C,iBAAA,CAAG,aAAY;MAC1B,IAAI;QACF,IAAM2B,MAAM,SAASjD,mBAAmB,CAACiE,OAAO,CAAC,CAAC;QAClD,OAAOhB,MAAM;MACf,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;QACvC,OAAO;UAAEK,OAAO,EAAE,KAAK;UAAEL,KAAK,EAAEA,KAAK,CAACM;QAAQ,CAAC;MACjD;IACF,CAAC;IAAA,gBARKc,OAAOA,CAAA;MAAA,OAAAC,KAAA,CAAAvB,KAAA,OAAAC,SAAA;IAAA;EAAA,GAQZ;EAED,IAAMuB,KAAK,GAAG;IACZrD,IAAI,EAAJA,IAAI;IACJI,OAAO,EAAPA,OAAO;IACP6B,gBAAgB,EAAhBA,gBAAgB;IAChBK,kBAAkB,EAAlBA,kBAAkB;IAClBE,eAAe,EAAfA,eAAe;IACfK,eAAe,EAAfA,eAAe;IACfM,OAAO,EAAPA;EACF,CAAC;EAED,OAAO9D,OAAA,CAACC,WAAW,CAACgE,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAzD,QAAA,EAAEA;EAAQ;IAAA2D,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,GAAAC,KAAuB,CAAC;AAC9E,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}